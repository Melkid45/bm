function onEntry(e) {
  e.forEach((e) => {
    e.isIntersecting && e.target.classList.add("element-show");
  });
}


$.fn.setCursorPosition = function(pos) {
  if ($(this).get(0).setSelectionRange) {
    $(this).get(0).setSelectionRange(pos, pos);
  } else if ($(this).get(0).createTextRange) {
    var range = $(this).get(0).createTextRange();
    range.collapse(true);
    range.moveEnd('character', pos);
    range.moveStart('character', pos);
    range.select();
  }
};

$("#tel").click(function(){
  $(this).setCursorPosition(3);
}).mask("+7(999) 999-9999");
$("#tel").mask("+7(999) 999-9999");

$(document).ready(function(){
  $('a[href^="#feedback"]').on('click',function(e){
    e.preventDefault();
  var anch = $(this).attr('href').split('#');
  var items = $('#'+anch[1]).position().top - 70;
  var body = $("html, body");
  body.stop().animate({scrollTop:items+'px'}, '800', 'swing');		
});	
  });

  $('.checkbox-label').on('click', function(e){
    if ($('#checkbox').prop('checked')){
      $('#checkbox').removeAttr('checked')
      $('#checkbox').removeClass('active')
    }else{
      $('#checkbox').attr('checked', 'checked')
      $('#checkbox').addClass('active')
    }
    
  })
  $('.feedback__body-form-btn').on('click', function(e){
    let col = 0
    let tel = $('#tel').val()
    $('.feedback__body-form-input').each(function(e){
      if ($(this).val() != ''){
        col++
      }
    })
    if ($('#checkbox').attr('checked') == 'checked'){
      col++
    }

    if (col == 3){
      $(this).attr('type','submit')
      window.location.href = 'home.html'
      $('.good').addClass('active')
    }
  })

  $('.good__body-btn').on('click', function(e){
    $('.good').removeClass('active')
  })




  $('.work__body-btn').on('click', function(e){
    $('.work__body').addClass('active')
  })
SmoothScroll({
    // Время скролла 400 = 0.4 секунды
    animationTime    : 600,
    // Размер шага в пикселях 
    stepSize         : 45,

    // Дополнительные настройки:
    
    // Ускорение 
    accelerationDelta : 30,  
    // Максимальное ускорение
    accelerationMax   : 1,   

    // Поддержка клавиатуры
    keyboardSupport   : true,  
    // Шаг скролла стрелками на клавиатуре в пикселях
    arrowScroll       : 100,

    // Pulse (less tweakable)
    // ratio of "tail" to "acceleration"
    pulseAlgorithm   : true,
    pulseScale       : 4,
    pulseNormalize   : 1,

    // Поддержка тачпада
    touchpadSupport   : true,
})
let options = { threshold: [0.5] },
  observer = new IntersectionObserver(onEntry, options),
  elements = document.querySelectorAll(".element-animation");
for (let e of elements) observer.observe(e);
var splide;
$(window).on("load", function (e) {
  $(".sum").text(`${$("#sum_slider").val()}₽`),
    $(".age").text(`${$("#age_slider").val()} месяцев`);
}),
  $("#sum_slider").on("change input", function (e) {
    let t = $("#sum_slider").val(),
      o = $("#age_slider").val(),
      n = Math.floor(t / o, 2);
    $(".result").text(`${n} ₽`);
  }),
  $("#age_slider").on("change input", function (e) {
    let t = $("#sum_slider").val(),
      o = $("#age_slider").val(),
      n = Math.floor(t / o, 2);
    $(".result").text(`${n} ₽`);
  }),
  $("#age_slider").on("change input", function (e) {
    let t = $(this).val();
    $(".age").text(`${t} месяцев`);
  }),
  $("#sum_slider").on("change input", function (e) {
    let t = $(this).val();
    $(".sum").text(`${t} ₽`);
  }),
  $(".burger").on("click", function (e) {
    $(".header").toggleClass("active"), $(this).toggleClass("active");
  }),
  $(".work__body-item").on("click", function (e) {
    $(this).children(".work__body-item-modal").addClass("active");
  }),
  $(".work__body-item-modal-body-close").on("click", function (e) {
    setTimeout(() => {
      $(".work__body-item-modal").removeClass("active");
    }, 100);
  }),
  (splide = new Splide("#rev", { pagination: !1 })).mount(),
  (splide = new Splide("#part", { pagination: !1 })).mount();
